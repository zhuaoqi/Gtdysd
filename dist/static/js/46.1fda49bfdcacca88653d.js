webpackJsonp([46],{"1cHr":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("mvHQ"),a=s.n(o),r=s("L6bb"),n=s.n(r),i=s("Au9i"),u=s("wSLB"),c={data:function(){return{user:{name:"",password:"",code:""},gobutt:!0,placeholder:"请输入手机号/邮箱"}},created:function(){this.$route.query.name&&(this.placeholder="请输入手机号"),this.$store.commit("selechange",4),this.$store.commit("_change",{_logo:!1,_title:"注册",_search:!1,_topshow:!0,_msg:!1,_bottshow:!0,_regain:!1,_back:!0})},methods:{goto:function(){this.$router.goBack()},getcode:function(){var e=this.$refs.button,t=59,s=0;if(/^[1][3,4,5,7,8][0-9]{9}$/.test(this.user.name)&&(s=1),/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.user.name)&&(s=2),0!=s){e.setAttribute("disabled",!0),e.innerText="60秒后重试";var o=setInterval(function(){e.innerText=t--+"秒后重试",0==t&&(clearTimeout(o),e.removeAttribute("disabled"),e.innerText="获取验证码",e.style.backgroundColor="#e65400")},1e3);e.style.backgroundColor="#dcdcdc",1==s?this.$axios.post("/",{method:"auth.code.smssend",type:1,mobile:this.user.name}).then(function(e){0==e.data.status&&Object(i.Toast)("验证码发送成功")}):this.$axios.post("/",{method:"auth.code.smtpsend",type:1,email:this.user.name}).then(function(e){0==e.data.status&&Object(i.Toast)("验证码发送成功")})}else Object(i.Toast)("手机号码或邮箱格式错误")},register:function(){if(""==this.user.name||""==this.user.password||""==this.user.code)return!1;var e=this,t=void 0;t=/^[1][3,4,5,7,8][0-9]{9}$/.test(e.user.name)?1:2,i.Indicator.open();var s={type:t,access:e.user.name,password:n()(n()("SMARTSCENE."+e.user.password)),code:e.user.code,method:"usercenter.login.add"};this.$route.query.name&&(s.method="usercenter.login.addicode",s.icode=this.$route.query.name);var o=Object(u.d)(s);this.$axios.post("/",o).then(function(t){i.Indicator.close(),0==t.data.status?(localStorage.setItem("to_ken",t.data.data.token),localStorage.setItem("is_login",!0),localStorage.setItem("user_info",a()(t.data.data.user_info)),Object(i.Toast)({message:"注册成功",iconClass:"icon-success",duration:1500}),setTimeout(function(){e.$router.push({name:"appIndex",query:{type:!0}})},2e3)):(e.user.password="",Object(i.Toast)(t.data.msg))})}},watch:{user:{handler:function(e,t){""==!this.user.name&&""==!this.user.password&&""==!this.user.code?this.gobutt=!1:this.gobutt=!0},deep:!0}},components:{}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logo_page"},[s("div",{staticClass:"from_p"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"txet",placeholder:e.placeholder,name:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),e._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.code,expression:"user.code"}],attrs:{type:"number",placeholder:"验证码"},domProps:{value:e.user.code},on:{input:function(t){t.target.composing||e.$set(e.user,"code",t.target.value)}}}),e._v(" "),s("button",{ref:"button",staticClass:"getcode",attrs:{type:"button"},on:{click:e.getcode}},[e._v("获取验证码")])]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"请输入密码 (6-24位字符)"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e._v(" "),s("mt-button",{staticStyle:{"margin-top":"16px","font-family":"'Microsoft YaHei'"},attrs:{type:"primary",size:"large",disabled:e.gobutt},on:{click:e.register}},[e._v("注册并登陆")])],1)},staticRenderFns:[]};var l=s("VU/8")(c,d,!1,function(e){s("5wJ7")},null,null);t.default=l.exports},"5wJ7":function(e,t){}});
//# sourceMappingURL=46.1fda49bfdcacca88653d.js.map