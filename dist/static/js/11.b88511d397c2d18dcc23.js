webpackJsonp([11],{PWvc:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("tttu"),a=e("Au9i"),o=e("VPLA"),n=e("pXoa"),v={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.islook?e("div",{staticClass:"feomType_text",class:t.islook?"feomCss":"",on:{touchmove:function(t){t.preventDefault()}}},[e("img",{attrs:{src:"/static/img/vip/sign_fail@2x.png"}}),t._v(" "),1==t.data.type?e("div",{staticStyle:{"margin-top":"0.2rem"}},[e("p",[t._v("您还没有对应的钥匙")]),t._v(" "),e("p",[t._v("快用积分兑换吧")])]):t._e()]):t._e()},staticRenderFns:[]};var c=e("VU/8")({data:function(){return{}},methods:{},props:["islook","data"]},v,!1,function(t){e("xVdl")},null,null).exports,l={data:function(){return{Obj:{tit:"领取记录",path:"/vip/Conveboslist"},keylist:{0:{num:0},1:{num:0},2:{num:0},3:{num:0}},isopbox:!1,mask:!1,boxtype:{type:4,tit:""},boxlist:{befpage:1,allpage:0,befdata:[],alldata:[]},isanima:!1,odbox:[],boxshow:!1,openbox_ms:{tit:""},box_:{box_code:""},typeText:!1}},created:function(){this.$store.commit("selechange",4),this.$store.commit("_change",{_topshow:!1,_bottshow:!0})},methods:{openBox:function(t,i){switch(this.box_.box_code=i,this.box_.type=Number(t)+3,Number(t)){case 1:this.openbox_ms.tit="确认消耗一把木质钥匙兑换吗？";break;case 2:this.openbox_ms.tit="确认消耗一把白金钥匙兑换吗？";break;case 3:this.openbox_ms.tit="确认消耗一把钻石钥匙兑换吗？";break;case 4:this.openbox_ms.tit="确认消耗一把王者钥匙兑换吗？"}this.boxshow=!0,this.mask=!0},nexPage:function(){var t=this;this.isanima=!0;var i=this.boxlist;i.befpage==i.allpage&&(i.befpage=0),i.befpage=i.befpage+1,i.befdata=i.alldata.slice(4*(i.befpage-1),4*i.befpage),setTimeout(function(){t.isanima=!1},200)},confirm:function(t){var i=this;this.boxshow=!1,this.mask=!1,t&&(a.Indicator.open(),this.$axios.post("/",{method:"member.box.openbox",box_code:this.box_.box_code}).then(function(t){a.Indicator.close(),0==t.data.status?(i.getbox(),i.boxtype.tit=t.data.data.name,i.boxtype.type=i.box_.type,i.keylist[i.box_.type-4].num-=1,i.isopbox=!0,i.mask=!0):202==t.data.status?(i.typeText=!0,i.mask=!0):Object(a.Toast)(t.data.msg)}))},getbox:function(){var t=this;this.$axios.post("/",{method:"member.box.boxmore",state:1,firstrow:1,pagesize:100}).then(function(i){if(0==i.data.status){var e=i.data.data.data;for(var s in e)1==e[s].level?e[s].img="/static/img/vip/img_woodenbox_s@2x.png":2==e[s].level?e[s].img="/static/img/vip/img_whitegoldbox_s@2x.png":3==e[s].level?e[s].img="/static/img/vip/diamonds_box_s@2x.png":4==e[s].level&&(e[s].img="/static/img/vip/king_box_s@2x.png");t.boxlist.alldata=i.data.data.data,t.boxlist.befdata=i.data.data.data.slice(0,4),t.boxlist.allpage=Math.ceil(i.data.data.count/4)}else Object(a.Toast)(i.data.msg)})},clickEvent:function(){this.typeText=!1,this.mask=!1}},mounted:function(){var t=this;this.$axios.post("/",{method:"member.box.keylist"}).then(function(i){0==i.data.status?t.keylist=i.data.data:Object(a.Toast)(i.data.msg)}),this.getbox(),this.$axios.post("/",{method:"member.box.boxmore",state:3,firstrow:1,pagesize:3}).then(function(i){if(0==i.data.status){var e=i.data.data.data,s=[];for(var o in e)1==e[o].level?s[o]="/static/img/vip/img_woodenbox@2x.png":2==e[o].level?s[o]="/static/img/vip/img_whitegoldbox@2x.png":3==e[o].level?s[o]="/static/img/vip/diamonds_box@2x.png":4==e[o].level&&(s[o]="/static/img/vip/king_box_s@2x.png");t.odbox=[]}else Object(a.Toast)(i.data.msg)})},components:{vipHeard:s.a,openBoxs:o.a,messageBox:n.a,typeText:c}},p={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"myBox_page"},[e("vip-heard",{attrs:{title:"我的宝箱",isback:!0,type:t.Obj}}),t._v(" "),e("div",{staticStyle:{height:"0.5rem","background-color":"#fff"}}),t._v(" "),e("main",[t._m(0),t._v(" "),e("div",{staticClass:"border",staticStyle:{position:"relative"}}),t._v(" "),e("div",{staticClass:"key"},[e("div",[e("div",[e("p",[t._v("木质钥匙")]),t._v(" "),e("p",[t._v(t._s(t.keylist[0].num)+" 把")])]),t._v(" "),e("img",{attrs:{src:"/static/img/vip/woodiness_key@2x.png"}})]),t._v(" "),e("div",[e("div",[e("p",[t._v("白金钥匙")]),t._v(" "),e("p",[t._v(t._s(t.keylist[1].num)+" 把")])]),t._v(" "),e("img",{attrs:{src:"/static/img/vip/platinum_key@2x.png"}})]),t._v(" "),e("div",[e("div",[e("p",[t._v("钻石钥匙")]),t._v(" "),e("p",[t._v(t._s(t.keylist[2].num)+" 把")])]),t._v(" "),e("img",{attrs:{src:"/static/img/vip/diamonds_key@2x.png"}})]),t._v(" "),e("div",[e("div",[e("p",[t._v("王者钥匙")]),t._v(" "),e("p",[t._v(t._s(t.keylist[3].num)+" 把")])]),t._v(" "),e("img",{attrs:{src:"/static/img/vip/king_key@2x.png"}})])]),t._v(" "),e("div",{staticClass:"_tit",staticStyle:{"margin-top":"0.1rem"}},[e("span",[t._v("已有的宝箱")]),t._v(" "),e("div",[e("p",{on:{click:function(i){t.$router.push("/vip/boxrule")}}},[t._v("宝箱规则"),e("span")])])]),t._v(" "),e("div",{staticClass:"border",staticStyle:{position:"relative"}}),t._v(" "),e("div",{staticClass:"box_box"},[e("p",[t._v("未过期")]),t._v(" "),t.boxlist.allpage>1?e("p",{on:{click:t.nexPage}},[e("span"),t._v("换一批")]):t._e()]),t._v(" "),0!=t.boxlist.befdata.length?e("div",{staticClass:"box",class:t.isanima?"isanima":"",style:{"min-height":t.boxlist.alldata.length>2?"2rem":0}},t._l(t.boxlist.befdata,function(i){return e("div",{class:"box_"+i.level},[e("div",[e("p",[t._v(t._s(i.name))]),t._v(" "),e("button",{on:{click:function(e){t.openBox(i.level,i.box_code)}}},[t._v("开启宝箱")])]),t._v(" "),e("img",{attrs:{src:i.img}})])})):e("div",{staticClass:"nosto"},[e("img",{attrs:{src:"/static/img/vip/icon_overdue@2x.png"}}),t._v(" "),e("p",[t._v("偷偷告诉你，连续签到即可获得宝箱")])]),t._v(" "),e("p",{staticStyle:{margin:"0.16rem 0","font-size":"14px",color:"#646464"}},[t._v("已过期")]),t._v(" "),0!=t.odbox.length?e("div",{staticClass:"oldbox"},t._l(t.odbox,function(t){return e("div",{style:{"background-image":"url("+t+")"}},[e("img",{attrs:{src:"/static/img/vip/img_overdue@2x.png"}})])})):e("div",{staticClass:"nosto"},[e("img",{attrs:{src:"/static/img/vip/icon_overdue@2x.png"}}),t._v(" "),e("p",[t._v("当前还没有过期的物品哦")])]),t._v(" "),e("div",{staticStyle:{height:"0.6rem"}})]),t._v(" "),e("open-boxs",{attrs:{islook:t.isopbox,data:t.boxtype},on:{isclose:function(i){t.mask=!1,t.isopbox=!1}}}),t._v(" "),e("message-box",{attrs:{islook:t.boxshow,data:t.openbox_ms},on:{confirm:t.confirm}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mask,expression:"mask"}],staticClass:"mask",on:{touchmove:function(t){t.preventDefault()},click:function(i){t.typeText&&t.clickEvent()}}}),t._v(" "),e("typeText",{attrs:{islook:t.typeText,data:{type:1}}})],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"_tit"},[i("span",[this._v("已有的钥匙")])])}]};var m=e("VU/8")(l,p,!1,function(t){e("wxPM")},null,null);i.default=m.exports},wxPM:function(t,i){},xVdl:function(t,i){}});
//# sourceMappingURL=11.b88511d397c2d18dcc23.js.map