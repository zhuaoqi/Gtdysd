webpackJsonp([6],{KBJM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),n=i.n(s),a=i("wSLB"),o=i("Au9i"),r={data:function(){return{issho:!0,loading:!1,loadings:!1,isliding:!0,note_inf:[],comment:[],uid:this.$route.query.notid,params:{uid:this.$route.query.notid,page:1,pagesize:5,fir_answer_id:0},comm:{note_id:this.$route.query.notid,content:"",note_name:"",discuss_userid:0,fir_answer_id:0,method:"note.answer.add"},placeholder:"说些什么吧...",page:""}},created:function(){this.$route.query.notid||this.$router.push("/404"),this.$store.commit("selechange",4),this.$store.commit("_change",{_logo:!1,_title:"帖子详情",_search:!1,_topshow:!0,_msg:!1,_bottshow:!1,_regain:!1,_back:!1,_goinx:!0})},methods:{gocommdetails:function(t){this.params.fir_answer_id=t.id,t.params=this.params,t.note_name=this.note_inf[0].data.title,sessionStorage.setItem("commentdetails",n()(t)),this.$router.push({name:"commentdetails"})},getContent:function(t){var e=this;if(""!=t.trim()){var i=this.comm;i.content=Object(a.a)(t);var s=Object(a.d)(i);this.$axios.post("/",s).then(function(t){0==t.data.status&&(Object(o.Toast)("评论成功"),e.frends_list(),e.$refs.input.$refs.textareaHtml.innerHTML="",e.$refs.input.$refs.textareaHtml.blur()),201==t.data.status&&(Object(o.Toast)(t.data.msg),e.$router.push("/logo"))})}else Object(o.Toast)("评论内容不能为空")},dom:function(t){t=(t=(t=(t=(t=(t=t.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#039;/g,"'")).replace(/&#39;/g,"'");var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0].width="100%",e.childNodes[0].height="100%",e.innerHTML},loadMore:function(){var t=this;this.page=this.page+1,this.isliding=!1,this.loading=!0,this.$axios.post("/",{method:"note.answer.list",note_id:this.params.uid,page:this.page,pagesize:5,fir_answer_id:0}).then(function(e){if(t.isliding=!0,t.loading=!1,0==e.data.status){if(null==e.data.data)return t.loadings=!0,void(t.isliding=!1);for(var i=e.data.data,s=0;s<i.length;s++)i[s].content=Object(a.e)(i[s].content);t.comment=t.comment.concat(i)}})},_fenxing:function(t,e){if(!Boolean(window.localStorage.getItem("is_login")))return Object(o.Toast)("登录失效"),this.$router.push("/logo"),!1;sessionStorage.setItem("_fenxing",t),sessionStorage.setItem("tiezi",n()(e)),this.$router.push({name:"share"})},_comment:function(t,e,i,s,n,a){this.issho=!0,this.$nextTick(function(){this.$refs.input.$refs.textareaHtml.innerHTML="",this.$refs.input.$refs.textareaHtml.focus()}),a?(this.placeholder="回复 "+n,this.comm.discuss_userid=Number(e),this.comm.fir_answer_id=Number(t)):(this.placeholder="说些什么吧...",this.comm.discuss_userid=0,this.comm.fir_answer_id=0)},like:function(t,e,i,s,n){this.note_inf[n].islike=!s,s=s?"no_collect":"collect",Object(a.b)(this,t,e,i,s)},share:function(t,e,i,s,n){this.note_inf[n].isscale=!s;var o=Number(this.note_inf[n].data.attribute_num.like);this.note_inf[n].data.attribute_num.like=s?String(o-1):String(o+1),s=s?"no_like":"like",Object(a.c)(this,t,e,i,s)},frends_list:function(){var t=this;o.Indicator.open(),this.$axios.post("/",{method:"note.answer.info",note_id:this.uid}).then(function(e){o.Indicator.close();var i=e.data.data.note_info.list,s=e.data.data.answer_list;if(t.comm.note_name=i[0].data.title,i[0].extra_id){var n=i[0].extra_id.length-1;i[0].extra_id[n].contents=Object(a.e)(i[0].extra_id[n].contents),t.comm.note_name="分享:"+i[0].extra_id[n].title}i[0].data.contents=Object(a.e)(i[0].data.contents),i[0].isscale="0"!=i[0].data.user_attribute.like,i[0].islike="0"!=i[0].data.user_attribute.collect,0==s.length?(t.loading=!1,t.loadings=!1,t.isliding=!1):t.isliding=!0;for(var r=0;r<s.length;r++)s[r].content=Object(a.e)(s[r].content);t.page=1,t.note_inf=i,t.comment=s})}},mounted:function(){this.$route.params.isblur&&this.$refs.input.$refs.textareaHtml.focus();var t=this;this.frends_list(),window.onscroll=function(){var e,i,s,n;s=0,n=0,document.body&&(s=document.body.scrollTop),document.documentElement&&(n=document.documentElement.scrollTop),(s-n>0?s:n)+("CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight)+60>=(e=0,i=0,document.body&&(e=document.body.scrollHeight),document.documentElement&&(i=document.documentElement.scrollHeight),e-i>0?e:i)&&t.isliding&&t.loadMore()}},components:{reply:i("Wkgs").a}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"details_page"},[t._l(t.note_inf,function(e,s){return i("div",{key:s,staticClass:"user_msg"},[i("div",{staticClass:"user_msg_t",on:{click:function(i){t.$router.push({name:"othersIndex",query:{uid:e.data.user_info.gt_id}})}}},[i("img",{attrs:{src:e.data.user_info.avatar||"/static/img/morentouxiang --icon.png",alt:""}})]),t._v(" "),i("div",[i("div",[i("p",[t._v(t._s(e.data.user_info.nickname))]),t._v(" "),i("p",[t._v(t._s(e.data.update_time))])]),t._v(" "),t._m(0,!0)]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("div",[i("i",[t._v(t._s(e.data.title))])]),t._v(" "),i("div",[i("p",{staticStyle:{"text-indent":"0"},domProps:{innerHTML:t._s(e.data.contents)}}),t._v(" "),""!=e.data.uurl?[-1==e.data.uurl[0].search("iframe")?i("div",{staticClass:"t-pic"},t._l(e.data.uurl,function(s,n){return i("img",{key:n,staticClass:"wc-preview-img",attrs:{src:s+"?x-oss-process=image/resize,m_fill,h_200,w_200"},on:{click:function(i){i.stopPropagation(),t.$preview(i,e.data.uurl,n)}}})})):i("div",{domProps:{innerHTML:t._s(t.dom(e.data.uurl[0]))}})]:t._e()],2),t._v(" "),e.extra_id?[i("div",{staticClass:"user_msg",style:{"background-color":null==e.extra_id[e.extra_id.length-1]?"#fff":"#f6f6f6"}},[null!=e.extra_id[e.extra_id.length-1]?[i("div",{staticClass:"user_msg_t",on:{click:function(i){t.$router.push({name:"othersIndex",query:{uid:e.extra_id[e.extra_id.length-1].user_info.gt_id}})}}},[i("img",{attrs:{src:e.extra_id[e.extra_id.length-1].user_info.avatar||"/static/img/morentouxiang --icon.png",alt:""}})]),t._v(" "),i("div",{staticStyle:{width:"2.8rem"}},[i("div",[i("p",[t._v(t._s(e.extra_id[e.extra_id.length-1].user_info.nickname))]),t._v(" "),i("p",[t._v(t._s(e.extra_id[e.extra_id.length-1].update_time))])]),t._v(" "),i("div",{staticClass:"labels"},[i("span",[t._v(t._s(e.extra_id[e.extra_id.length-1].game_type_str))]),t._v(" "),i("span",[t._v(t._s(e.extra_id[e.extra_id.length-1].note_type_str))])])]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("div",[i("i",[t._v(t._s(e.extra_id[e.extra_id.length-1].title))])]),t._v(" "),i("div",[i("p",{staticStyle:{"text-indent":"0"},domProps:{innerHTML:t._s(e.extra_id[e.extra_id.length-1].contents)}}),t._v(" "),t._l(e.extra_id[e.extra_id.length-1].uurl,function(e,s){return i("div",{key:s,staticClass:"t-pic"},[-1==e.search("iframe")?i("img",{attrs:{src:e+"?x-oss-process=image/resize,m_fill,h_200,w_200"}}):i("div",{domProps:{innerHTML:t._s(t.dom(e))}})])})],2)]:[t._v("\n                  抱歉该帖已删除\n              ")]],2)]:t._e(),t._v(" "),i("div",{staticClass:"startPointer border_t",staticStyle:{position:"relative"}},[i("a",{on:{click:function(e){t._comment()}}},[i("i",{staticClass:"reply-icon"}),0==e.data.attribute_num.comment?i("span",[t._v("评论")]):i("span",[t._v(t._s(e.data.attribute_num.comment))])]),t._v(" "),i("a",{on:{click:function(i){t._fenxing(e.data.uid,e)}}},[i("i",{staticClass:"share-icon"}),i("span",[t._v("分享")])]),t._v(" "),i("a",{class:{like:e.islike},on:{click:function(i){t.like(e.data.uid,e.data.title,e.data.user_info.gt_id,e.islike,s)}}},[i("i",{staticClass:"collect-icon"}),t._v(" "),e.islike?i("span",[t._v("已收藏")]):i("span",[t._v("收藏")])]),t._v(" "),i("a",{class:{scale:e.isscale},on:{click:function(i){t.share(e.data.uid,e.data.title,e.data.user_info.gt_id,e.isscale,s)}}},[i("i",{staticClass:"laud-icon"}),0==e.data.attribute_num.like?i("span",[t._v("点赞")]):i("span",[t._v(t._s(e.data.attribute_num.like))])])])],2)}),t._v(" "),i("div",{staticClass:"Reviewarea"},[i("ul",t._l(t.comment,function(e,s){return i("li",{staticClass:"clearfix"},[i("div",[i("img",{attrs:{src:e.user_info.avatar||"/static/img/morentouxiang --icon.png",alt:""},on:{click:function(i){t.$router.push({name:"othersIndex",query:{uid:e.user_info.gt_id}})}}})]),t._v(" "),i("div",[i("p",[t._v(t._s(e.user_info.nickname))]),t._v(" "),i("span",{domProps:{innerHTML:t._s(e.content)}}),t._v(" "),i("div",{staticClass:"revidate"},[i("p",[t._v(t._s(e.updatetime))]),t._v(" "),i("p",{staticClass:"faubl"},[t._m(1,!0),t._v(" "),i("span",{staticClass:"comment_icon",on:{click:function(i){t._comment(e.id,e.user_info.gt_id,e.content,e.fir_answer_id,e.user_info.nickname,!0)}}})])]),t._v(" "),0!=e.count?i("div",{staticClass:"returns",on:{click:function(i){t.gocommdetails(e)}}},[t._v("\n                查看全部"+t._s(e.count)+"条回复>\n              ")]):t._e()])])})),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"page-infinite-loading"},[t._m(2),t._v("\n          加载中...\n        ")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.loadings,expression:"loadings"}],staticStyle:{"text-align":"center","line-height":"25px","font-size":"12px"}},[t._v("已加载全部评论")])]),t._v(" "),i("div",{staticStyle:{height:"50px"}}),t._v(" "),i("reply",{ref:"input",attrs:{isshow:t.issho,placeholder:t.placeholder},on:{getContent:t.getContent}})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"labels"},[e("span",[this._v("其他")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("div",{staticStyle:{"border-top-color":"rgb(204, 204, 204)","border-left-color":"rgb(204, 204, 204)","border-bottom-color":"rgb(204, 204, 204)",height:"25px",width:"25px"}})])}]};var l=i("VU/8")(r,c,!1,function(t){i("SoWj")},null,null);e.default=l.exports},SoWj:function(t,e){},Wkgs:function(t,e,i){"use strict";var s={data:function(){return{issss:!1}},methods:{getExpression:function(t){this.$refs.textareaHtml.append(t)},pushcomm:function(){var t=this.$refs.textareaHtml.innerHTML;this.$emit("getContent",t)}},components:{imgSelect:i("4Pbo").a},props:["isshow","placeholder"]},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"reply",class:{Expression:t.issss}},[i("div",[i("p",{staticClass:"push_img"},[i("img",{attrs:{src:"/static/img/game_fenxiang_icon_biaoqing@3x.png"},on:{click:function(e){t.issss=!0}}})]),i("div",{ref:"textareaHtml",staticClass:"textareass",attrs:{contenteditable:"true",placeholder:t.placeholder},on:{focus:function(e){t.issss=!1}}}),t._v(" "),i("p"),t._v(" "),i("p",{staticStyle:{color:"#e65400"},on:{click:t.pushcomm}},[t._v("发布")])]),t._v(" "),i("div",{staticClass:"boxd"},[i("img-select",{attrs:{islook:t.issss},on:{getExpression:t.getExpression}})],1),t._v(" "),i("div",{staticStyle:{height:"20px"}})])},staticRenderFns:[]};var a=i("VU/8")(s,n,!1,function(t){i("lAu3")},null,null);e.a=a.exports},lAu3:function(t,e){}});
//# sourceMappingURL=6.3a57b3c2138ecc258cd5.js.map