webpackJsonp([4],{"54Kl":function(t,s,a){"use strict";var i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:this.islook,expression:"islook"}],staticClass:"Exchange",class:this.islook?"feomCss":"",on:{touchmove:function(t){t.preventDefault()}}},[s("img",{attrs:{src:this.data.img}}),this._v(" "),s("p",[this._v(this._s(this.data.msg))])])},staticRenderFns:[]};var e=a("VU/8")({data:function(){return{value:!1}},methods:{},props:["islook","data"]},i,!1,function(t){a("fpcs")},null,null);s.a=e.exports},CWfm:function(t,s){},XUYG:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("Au9i"),e=a("54Kl"),n=a("pXoa"),c={data:function(){return{mask:!1,isopbox:!1,success:!1,message:{tit:"确定要兑换该权益吗？",msg:""},succesSrc:{img:"/static/img/vip/choosebutton_selected@2x.png",msg:"恭喜您，兑换成功！"},integral:0,exchangeList:{befpage:1,allpage:0,befdata:[],alldata:[]},isanima:!1,stodata:{},ranking:[]}},created:function(){this.$store.commit("selechange",4),this.$store.commit("_change",{_topshow:!1,_bottshow:!0})},methods:{goBack:function(){this.$router.goBack()},confirm:function(t){var s=this;this.isopbox=!1,this.mask=!1,t&&(i.Indicator.open(),this.$axios.post("/",{method:"member.score.addOrder",shop_id:this.stodata.id}).then(function(t){i.Indicator.close(),0==t.data.status?(s.integral-=t.data.data.price,s.success=!0,s.mask=!0):Object(i.Toast)(t.data.msg)}))},reward:function(t,s){this.stodata={id:t},this.mask=!0,this.isopbox=!0},clickEvent:function(){this.mask=!1,this.success=!1},nexPage:function(){var t=this;this.isanima=!0;var s=this.exchangeList;s.befpage==s.allpage&&(s.befpage=0),s.befpage=s.befpage+1,s.befdata=s.alldata.slice(4*(s.befpage-1),4*s.befpage),setTimeout(function(){t.isanima=!1},200)}},mounted:function(){var t=this;this.$axios.post("/",{method:"member.score.getScore"}).then(function(s){0==s.data.status&&(t.integral=s.data.data)}),this.$axios.post("/",{method:"member.score.showGoods"}).then(function(s){0==s.data.status&&(t.exchangeList.alldata=s.data.data,t.exchangeList.befdata=s.data.data.slice(0,4),t.exchangeList.allpage=Math.ceil(s.data.data.length/4))}),this.$axios.post("/",{method:"member.score.showlist"}).then(function(s){0==s.data.status&&(t.ranking=s.data.data)})},components:{exchange:e.a,messageBox:n.a}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"myinteg_page"},[a("div",{staticClass:"myinteg_header"},[a("h1",[t._v("我的积分\n        "),a("div",{staticClass:"back",on:{click:t.goBack}})]),t._v(" "),a("div",{staticClass:"user_"},[a("div",[a("span",[t._v(t._s(t.integral))]),t._v(" "),a("p",[t._v("当前积分")])])]),t._v(" "),a("div",{staticClass:"rule",on:{click:function(s){t.$router.push("/vip/earnPoints")}}},[t._v("\n        +赚积分\n      ")]),t._v(" "),a("p",{staticClass:"Record",on:{click:function(s){t.$router.push("/vip/bilityrecord")}}},[t._v("积分兑换记录")])]),t._v(" "),a("main",[a("div",{staticClass:"reward "},[a("div",{staticClass:"_tit"},[a("span",[t._v("奖励说明")]),t._v(" "),a("div",[a("span"),t._v(" "),a("p",{on:{click:t.nexPage}},[t._v("换一批")])])]),t._v(" "),a("div",{staticClass:"border",staticStyle:{position:"relative"}}),t._v(" "),a("div",{staticClass:"rewardList",class:t.isanima?"isanima":""},t._l(t.exchangeList.befdata,function(s){return a("div",[a("div",[a("img",{attrs:{src:s.ico}}),t._v(" "),a("p",[t._v(t._s(10*s.price)+"积分")]),t._v(" "),a("p",[t._v(t._s(s.price)+"积分")])]),t._v(" "),a("p",[t._v(t._s(s.title))]),t._v(" "),a("button",{attrs:{type:"button"},on:{click:function(a){t.reward(s.id)}}},[t._v("立即兑换")])])}))]),t._v(" "),a("div",{staticStyle:{"margin-top":"13px","background-color":"#fff",padding:"0 11px","padding-bottom":"20px"}},[a("div",{staticClass:"_tit"},[t._v("积分排行")]),t._v(" "),a("ul",{staticClass:"Rankinglist"},t._l(t.ranking,function(s,i){return a("li",[a("span",[i+1==1?a("img",{attrs:{src:"/static/img/vip/LV_1@2x.png"}}):i+1==2?a("img",{attrs:{src:"/static/img/vip/LV_2@2x.png"}}):i+1==3?a("img",{attrs:{src:"/static/img/vip/LV_3@2x.png"}}):[t._v(t._s(i+1))]],2),t._v(" "),a("span",[a("img",{attrs:{src:s.avatar?s.avatar:"/static/img/morentouxiang --icon.png"}})]),t._v(" "),a("span",[t._v(t._s(s.nickname))]),t._v(" "),a("span"),t._v(" "),a("span",[t._v(t._s(s.score))])])}))])]),t._v(" "),a("message-box",{attrs:{islook:t.isopbox,data:t.message},on:{confirm:t.confirm}}),t._v(" "),a("exchange",{attrs:{islook:t.success,data:t.succesSrc}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mask,expression:"mask"}],staticClass:"mask",on:{touchmove:function(t){t.preventDefault()},click:function(s){t.success&&t.clickEvent()}}})],1)},staticRenderFns:[]};var r=a("VU/8")(c,o,!1,function(t){a("CWfm")},null,null);s.default=r.exports},fpcs:function(t,s){}});
//# sourceMappingURL=4.225de42af0d2799eab01.js.map