webpackJsonp([3],{Wkgs:function(t,e,s){"use strict";var i={data:function(){return{issss:!1}},methods:{getExpression:function(t){this.$refs.textareaHtml.append(t)},pushcomm:function(){var t=this.$refs.textareaHtml.innerHTML;this.$emit("getContent",t)}},components:{imgSelect:s("4Pbo").a},props:["isshow","placeholder"]},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"reply",class:{Expression:t.issss}},[s("div",[s("p",{staticClass:"push_img"},[s("img",{attrs:{src:"/static/img/game_fenxiang_icon_biaoqing@3x.png"},on:{click:function(e){t.issss=!0}}})]),s("div",{ref:"textareaHtml",staticClass:"textareass",attrs:{contenteditable:"true",placeholder:t.placeholder},on:{focus:function(e){t.issss=!1}}}),t._v(" "),s("p"),t._v(" "),s("p",{staticStyle:{color:"#e65400"},on:{click:t.pushcomm}},[t._v("发布")])]),t._v(" "),s("div",{staticClass:"boxd"},[s("img-select",{attrs:{islook:t.issss},on:{getExpression:t.getExpression}})],1),t._v(" "),s("div",{staticStyle:{height:"20px"}})])},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("lAu3")},null,null);e.a=a.exports},"gZ+m":function(t,e){},inrS:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("wSLB"),n=s("Au9i"),a={data:function(){return{allLoaded:!1,placeholder:"",issho:!0,loading:!1,comment:[],item:"",comm:{note_id:"",content:"",note_name:"",discuss_userid:0,fir_answer_id:0,method:"note.answer.add"},height:0,page:1}},created:function(){void 0!=sessionStorage.getItem("commentdetails")?(this.item=JSON.parse(sessionStorage.getItem("commentdetails")),this.comm.note_id=this.item.params.uid,this.comm.note_name=this.item.note_name,this.placeholder="回复: "+this.item.user_info.nickname,this.$store.commit("selechange",4),this.$store.commit("_change",{_logo:!1,_title:"评论详情",_search:!1,_topshow:!0,_msg:!1,_bottshow:!1,_regain:!1,_back:!0})):this.$router.push("/404")},methods:{getContent:function(t){var e=this;if(""!=t.trim()){var s=this.comm;s.content=Object(i.a)(t);var a={};for(var o in s)a[o]=s[o];this.$axios.post("/",a).then(function(t){0==t.data.status&&(Object(n.Toast)("评论成功"),e.frends_list(),e.$refs.input.$refs.textareaHtml.innerHTML="",e.$refs.input.$refs.textareaHtml.blur()),201==t.data.status&&(Object(n.Toast)(t.data.msg),e.$router.push("/logo"))})}else Object(n.Toast)("评论内容不能为空")},frends_list:function(){var t=this;this.allLoaded=!0;var e=this.item.params;this.$axios.post("/",{method:"note.answer.list",note_id:e.uid,page:e.page,pagesize:e.pagesize,fir_answer_id:e.fir_answer_id}).then(function(e){var s=e.data.data;console.log(s);for(var n=0;n<s.length;n++)s[n].content=Object(i.e)(s[n].content);t.comment=s})},_comment:function(t,e,s,i,n){this.$nextTick(function(){this.$refs.input.$refs.textareaHtml.innerHTML="",this.$refs.input.$refs.textareaHtml.focus()}),this.placeholder="回复: "+n,this.comm.discuss_userid=Number(e),this.comm.fir_answer_id=Number(t)},loadBottom:function(){var t=this,e=this.item.params;this.page+=1,n.Indicator.open(),this.$axios.post("/",{method:"note.answer.list",note_id:e.uid,page:this.page,pagesize:e.pagesize,fir_answer_id:e.fir_answer_id}).then(function(e){if(n.Indicator.close(),0==e.data.status){if(null==e.data.data)return Object(n.Toast)("已加载全部评论"),void(t.allLoaded=!0);for(var s=e.data.data,a=0;a<s.length;a++)s[a].content=Object(i.e)(s[a].content);t.comment=t.comment.concat(s)}else Object(n.Toast)(e.data.msg)}),this.$refs.loadmore.onBottomLoaded()},loadTop:function(){this.$refs.loadmore.onTopLoaded()}},mounted:function(){this.height=document.body.clientHeight-(110+this.$refs.usermsg.clientHeight)+"px",this.frends_list()},components:{reply:s("Wkgs").a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comm_page"},[s("div",{ref:"usermsg",staticClass:"user_msg"},[s("div",{staticClass:"user_msg_t"},[s("img",{attrs:{src:t.item.user_info.avatar||"/static/img/morentouxiang --icon.png",alt:""}})]),t._v(" "),s("div",[s("div",{staticStyle:{"line-height":"35px"}},[s("p",[t._v(t._s(t.item.user_info.nickname))]),t._v(" "),s("p")])]),t._v(" "),s("div",{staticClass:"clear"}),t._v(" "),s("p",{staticStyle:{color:"#4e4e4e","word-wrap":"break-word","text-indent":"0.5rem"}},[t._v(t._s(t.item.content))]),t._v(" "),s("div",{staticClass:"revidate"},[s("p",{staticStyle:{"font-size":"12px",color:"#909090"}},[t._v(t._s(t.item.updatetime))]),t._v(" "),s("p",{staticClass:"faubl"},[s("span",{staticClass:"comment_icon",on:{click:function(e){t._comment(t.item.id,t.item.user_info.gt_id,t.item.content,t.item.fir_answer_id,t.item.user_info.nickname)}}})])])]),t._v(" "),s("div",{staticClass:"Reviewarea",style:{height:t.height,overflow:"scroll"}},[s("mt-loadmore",{ref:"loadmore",attrs:{"auto-fill":!1,"bottom-method":t.loadBottom,"top-method":t.loadTop,"bottom-all-loaded":t.allLoaded}},[s("ul",t._l(t.comment,function(e,i){return s("li",{staticClass:"clearfix"},[s("div"),t._v(" "),s("div",[s("p",[t._v(t._s(e.user_info.nickname)),s("span",{staticStyle:{padding:"0 5px",color:"#e65400"}},[t._v("回复")]),t._v(t._s(e.dis_nickname))]),t._v(" "),s("span",{domProps:{innerHTML:t._s(e.content)}}),t._v(" "),s("div",{staticClass:"revidate"},[s("p",[t._v(t._s(e.updatetime))]),t._v(" "),s("p",{staticClass:"faubl"},[s("span",{staticClass:"comment_icon",on:{click:function(s){t._comment(t.item.id,e.user_info.gt_id,e.content,e.fir_answer_id,e.user_info.nickname)}}})])])])])}))])],1),t._v(" "),s("reply",{ref:"input",attrs:{isshow:t.issho,placeholder:t.placeholder},on:{getContent:t.getContent}})],1)},staticRenderFns:[]};var r=s("VU/8")(a,o,!1,function(t){s("gZ+m")},null,null);e.default=r.exports},lAu3:function(t,e){}});
//# sourceMappingURL=3.a12bdc9e8a3a34259ae2.js.map